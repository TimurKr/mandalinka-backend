{% load crispy_forms_tags %}

{% include 'core/html/message_warning.html' with warning=formset.non_form_errors only %}

<form id="steps-form" method="post" action="{{ action }}" class="row g-4">
  {% csrf_token %}
  <div id="management_form">
    {{ formset.management_form }}
  </div>

  {% for form in formset %}
  <div class="form-in-steps_formset col-6">
    {{ form | crispy }}
    <hr />
  </div>
  {% endfor %}

  <div class="col-12">
    <div id="div_id_steps_finished" class="mb-3">
      <input type="checkbox" name="steps_finished" class="checkboxinput form-check-input" id="id_steps_finished">
      <label for="id_steps_finished" class="form-check-label"> Postup je finálne hotový </label>
      <small id="hint_id_steps_finished" class="form-text text-muted"> Označte, ak je postup pripravený na publikáciu. </small>
    </div>
  </div>


  <div class="col-6 ms-auto">
    <button type="button" class="btn secondary-button" id="add-steps">Pridať krok</button>
  </div>
  <div class="col-6 ms-auto">
    <input type="submit" name="submit" value="Uložiť" class="btn primary-button" id="submit" />
  </div>
  {{ formset.media }}
</form>