{% load crispy_forms_tags %}

{% include 'core/html/message_warning.html' with warning=formset.non_form_errors only %}

<form id="ingredients-formset-{{ formset.prefix }}" method="post" action="{{ action }}" class="row g-4 ingredients-formset" prefix="{{ formset.prefix }}">
  {% csrf_token %}
  <div id="management_form">
    {{ formset.management_form }}
  </div>

  {% for form in formset %}
  <div class="form-in-ingredients_formset col-6">
    {{ form | crispy }}
    <hr />
  </div>
  {% endfor %}
  <div class="col-12">
    <div id="div_id_ingredients_finished" class="mb-3">
      <input type="checkbox" name="ingredients_finished" class="checkboxinput form-check-input" id="id_ingredients_finished">
      <label for="id_ingredients_finished" class="form-check-label"> Ingrediencie finálne hotové </label>
      <small id="hint_id_ingredients_finished" class="form-text text-muted"> Označte, ak sú ingrediencie pripravené na publikáciu. </small>
    </div>
  </div>

  <div class="col-6 ms-auto">
    <button type="button" class="btn secondary-button" id="add-ingredient-{{ formset.prefix }}">Pridať ingredienciu</button>
  </div>
  <div class="col-6 ms-auto">
    <input type="submit" name="submit" value="Uložiť" class="btn primary-button" id="submit" />
  </div>
  {{ formset.media }}
</form>