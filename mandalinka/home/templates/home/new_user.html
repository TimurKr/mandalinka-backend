{% extends "home/login_layout.html" %}

{% block title %}
    Zaregistrujte sa!
{% endblock %}

{% block body %}

    <form class="frm p-3" action="{% url 'home:new_user' %}" method="post">
        {% csrf_token %}
        
        <div class="alert alert-danger" >{{ form.non_field_errors }}</div>
        
        <!-- Nav tabs -->
        <ul class="nav nav-pills nav-fill" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="general-tab" data-bs-toggle="pill" data-bs-target="#general" type="button" role="tab" aria-controls="general" aria-selected="true">
                    Všeobecné údaje
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="preferences-tab" data-bs-toggle="pill" data-bs-target="#preferences" type="button" role="tab" aria-controls="profile" aria-selected="false">
                    Preferencie
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="shipping-tab" data-bs-toggle="pill" data-bs-target="#shipping" type="button" role="tab" aria-controls="shipping" aria-selected="false">
                    Doručenie
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="shipping_time-tab" data-bs-toggle="pill" data-bs-target="#shipping_time" type="button" role="tab" aria-controls="shipping_time" aria-selected="false">
                    Spôsob platby
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="billing-tab" data-bs-toggle="pill" data-bs-target="#billing" type="button" role="tab" aria-controls="billing" aria-selected="false">
                    Spôsob platby
                </button>
            </li>
        </ul>
        
        <!-- Tab panes -->
        <div class="tab-content">
            <div class="tab-pane active" id="general" role="tabpanel" aria-labelledby="general-tab" tabindex="0">
                <div class="row g-2 my-2">
                    <div class="col-sm-6 form-floating">
                        {{ form.firstname }}
                        <label for="{{ form.firstname.id_for_label }}">
                            {{ form.firstname.label }}
                        </label>
                        <p class="my-0">{{ form.firstname.help_text }}</p>
                    </div>
                    <div class="col-sm-6 form-floating">
                        {{ form.lastname }}
                        <label for="{{ form.lastname.id_for_label }}">
                            {{ form.lastname.label }}
                        </label>
                        <p class="my-0">{{ form.lastname.help_text }}</p>
                    </div>
                    <div class="col-12 form-floating">
                        {{ form.username }}
                        <label for="{{ form.username.id_for_label }}">
                            {{ form.username.label }}
                        </label>
                        <p class="my-0">{{ form.username.help_text }}</p>
                    </div>
                    <div class="col-12 form-floating">
                        {{ form.email }}
                        <label for="{{ form.email.id_for_label }}">
                            {{ form.email.label }}
                        </label>
                        <p class="my-0">{{ form.email.help_text }}</p>
                    </div>
                    <div class="col-12 form-check form-switch mx-2">
                        {{ form.newsletter }}
                        <label for="{{ form.newsletter.id_for_label }}" class="form-check-label">
                            {{ form.newsletter.label }}
                        </label>
                    </div>
                    <div class="col-12 form-floating">
                        {{ form.phone }}
                        <label for="{{ form.phone.id_for_label }}">
                            {{ form.phone.label }}
                        </label>
                        <p class="my-0">{{ form.phone.help_text }}</p>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="preferences" role="tabpanel" aria-labelledby="preferences-tab" tabindex="0">
                Tu sa budú vyberať preferencie pre nového používatela
            </div>
            <div class="tab-pane" id="shipping" role="tabpanel" aria-labelledby="shipping-tab" tabindex="0">
                Tu sa zadá adresa na doručovanie jedla
            </div>
            <div class="tab-pane" id="shipping_time" role="tabpanel" aria-labelledby="shipping_time-tab" tabindex="0">
                Zvolte si pravidelný čas doručovania
            </div>
            <div class="tab-pane" id="billing" role="tabpanel" aria-labelledby="billing-tab" tabindex="0">
                Zvolte si spôsob platby
            </div>
        </div>


        {% for elem in form %}
            
            <div class="form-group pt-3">
                <p> {{ elem.help_text }} </p>
                <label for="{{ elem.id_for_label }}">
                    {{ elem }}
                    {% if elem.label == "district" %}
                        <datalist id="districts">
                            {% for district in districts %}
                                <option value="{{ district.district }}"></option>
                            {% endfor %}
                        </datalist>
                    {% elif elem.label == "city" %}
                        <datalist id="cities">
                            {% for city in cities %}
                                <option value="{{ city.city }}"></option>
                            {% endfor %}
                        </datalist>
                    {% elif elem.label == "postal" %}
                        <datalist id="postal_codes">
                            {% for postal in postal_codes %}
                                <option value="{{ postal.code }}"></option>
                            {% endfor %}
                        </datalist>
                    {% elif elem.label == "street" %}
                        <datalist id="streets">
                            {% for street in streets %}
                                <option value="{{ street.street }}"></option>
                            {% endfor %}
                        </datalist>
                    {% endif %}
                    <div class="alert alert-danger" >{{ elem.errors }}</div>
                </label>
            </div>
            
        {% endfor %}
    
        <button class="btn btn-success" type="submit">Vytvor konto</button>
    </form>


{% endblock %}